
config:
  roles:
  - refers: []
    name: basic
    type: role
  - name: advanced
    refers:
    - basic
    type: role
  entities:
  - type: table
    name: config.lookups
    file: ddl/table/config/lookups.ddl
    schema: config
    refers: []
  - type: table
    name: staging.lookup_values
    file: ddl/table/staging/lookup_values.ddl
    schema: staging
    refers: []
  - type: procedure
    name: staging.import_json_to_table
    file: ddl/procedure/staging/import_json_to_table.ddl
    schema: staging
    refers: []
  - type: table
    name: config.lookup_values
    file: ddl/table/config/lookup_values.ddl
    schema: config
    refers:
      - config.lookups
  - type: view
    name: config.genders
    file: ddl/view/config/genders.ddl
    schema: config
    refers:
      - config.lookups
      - config.lookup_values
  - type: view
    name: migrate.lookup_values
    file: ddl/view/migrate/lookup_values.ddl
    schema: migrate
    refers:
      - config.lookups
      - config.lookup_values

  - type: procedure
    name: staging.import_lookups
    file: ddl/procedure/staging/import_lookups.ddl
    schema: staging
    refers:
      - config.lookup_values
      - config.lookups
      - staging.lookup_values

roles:
- type: role
  name: basic
  refers: []
- type: role
  name: advanced
  refers:
  - basic

entities:
  - type: schema
    name: config
  - type: schema
    name: extensions
  - type: schema
    name: staging
  - type: schema
    name: migrate
  - type: extension
    name: uuid-ossp
    schema: extensions
  - type: role
    name: basic
    refers: []
  - type: role
    name: advanced
    refers:
    - basic
  - type: table
    name: config.lookups
    file: ddl/table/config/lookups.ddl
    schema: config
    refers: []
  - type: table
    name: staging.lookup_values
    file: ddl/table/staging/lookup_values.ddl
    schema: staging
    refers: []
  - type: procedure
    name: staging.import_json_to_table
    file: ddl/procedure/staging/import_json_to_table.ddl
    schema: staging
    refers: []
  - type: table
    name: config.lookup_values
    file: ddl/table/config/lookup_values.ddl
    schema: config
    refers:
      - config.lookups
  - type: view
    name: config.genders
    file: ddl/view/config/genders.ddl
    schema: config
    refers:
      - config.lookups
      - config.lookup_values
  - type: view
    name: migrate.lookup_values
    file: ddl/view/migrate/lookup_values.ddl
    schema: migrate
    refers:
      - config.lookups
      - config.lookup_values
  - type: procedure
    name: staging.import_lookups
    file: ddl/procedure/staging/import_lookups.ddl
    schema: staging
    refers:
      - config.lookup_values
      - config.lookups
      - staging.lookup_values

beforeApply:
  schemas: []
  tables: []
afterApply:
  schemas:
    - schema_name: config
    - schema_name: extensions
    - schema_name: staging
    - schema_name: migrate
  tables:
    - table_schema: config
      table_name: genders
      table_type: VIEW
    - table_schema: config
      table_name: lookup_values
      table_type: BASE TABLE
    - table_schema: config
      table_name: lookups
      table_type: BASE TABLE
    - table_schema: migrate
      table_name: lookup_values
      table_type: VIEW
    - table_schema: staging
      table_name: lookup_values
      table_type: BASE TABLE
